version: '2'

services:
  spool:
    build: .
    volumes:
      - ./docs:/usr/src/app/docs
      - ./spool:/usr/src/app/spool
      - ./tests:/usr/src/app/tests
      - ./pytest.ini:/usr/src/app/pytest.ini
      - ./setup.cfg:/usr/src/app/setup.cfg
      - ./setup.py:/usr/src/app/setup.py
    command: py.test --verbose
  bdocs:
    build: .
    volumes:
      - ./docs:/usr/src/app/docs
      - ./spool:/usr/src/app/spool
    working_dir: /usr/src/app/docs
    command: make html
  vdocs:
    image: nginx
    ports:
      - '38181:80'
    volumes:
      - ./docs/build/html:/usr/share/nginx/html
